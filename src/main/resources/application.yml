# application.yaml
spring:
  application:
    name: chainvault-document-migration
  datasource:
    url: jdbc:postgresql://localhost:5433/jobrunr
    username: ${JOBRUNR_USERNAME}
    password: ${JOBRUNR_PASSWORD}
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        format-sql: true
      show-sql: true
  # Server settings
  main:
    banner-mode: off
  mvc:
    throw-exception-if-no-handler-found: true
  web:
    resources:
      add-mappings: false

server:
  port: 8080
  servlet:
    context-path: /

camunda:
  client:
    mode: self-managed
    auth:
      method: none
    grpc-address: http://0.0.0.0:26500
    rest-address: http://localhost:8082

#    # Optional: Job worker defaults (can override per @ZeebeWorker)
#    worker:
#      max-jobs-active: 32
#      poll-interval: 100ms
#      request-timeout: 10s
#      # backoff-strategy: exponential  # or fixed, linear â€“ default is exponential

    # Optional: Auto-deployment of BPMN/DMN/Forms on startup
    deployment:
      enabled: true
      resources:
        - classpath:bpmn/default_workflow.bpmn
        # - classpath:other-process.bpmn

target:
  sftp:
    host: localhost
    port: 22
    username: migration_user
    password: ${SFTP_PASSWORD:}
    private-key-path: /run/secrets/id_rsa
    known-hosts: /run/secrets/known_hosts
    remote-directory: /incoming/migration/

source:
  api:
    base-url: http://fake-source-api:9090
    token: dummy-for-test
migration:
  temp-dir: /tmp/migration-${random.uuid}
  chunk-size-for-inventory: 500   # when fetching lists